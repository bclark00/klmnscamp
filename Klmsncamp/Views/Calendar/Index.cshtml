@{
    ViewBag.Title = "Takvim Görüntüsü";
    }
   
<script src="../../Scripts/fullcalendar.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="@Url.Content("/Content/fullcalendar.css")" /> 
@section script
{

<script type='text/javascript' language="Javascript">

	$(document).ready(function() {

		var date = new Date();
		var d = date.getDate();
		var m = date.getMonth();
		var y = date.getFullYear();
	
		$('#calendar').fullCalendar({

			header: {
			     left: 'prev,next today',
                 center: 'title',
			    right: 'month,agendaWeek,agendaDay'
			},
            editable: true,
            events: '/Calendar/Json',
            eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {

		       
		            alert(
		            event.title + "( " + event.id + " ) was moved " +
		            dayDelta + " days and " +
		            minuteDelta + " minutes.");
                
		        if (allDay) {
		           // alert("Event is now all-day");
			           xallDay = "E";
		        }else{
		           // alert("Event has a time-of-day");
			           xallDay = "H";
		        }

		      /*  if (!confirm("Güncellensin mi?")) {
		            revertFunc();
		        }
		        else
		        {*/
		        	ajanda_guncelle(event.id,'S',dayDelta,minuteDelta,xallDay);
		        //}

		    },
					
			eventResize: function(event,dayDelta,minuteDelta,revertFunc) {

		        /*alert(
		            "The end date of " + event.title + "( "+event.id+ " ) has been moved " +
		            dayDelta + " days and " +
		            minuteDelta + " minutes."
		        );
				*/
		      /*  if (!confirm("Güncellensin mi??")) {
		            revertFunc();
		        }
		        else 
		        {*/
		           	ajanda_guncelle(event.id,'E',dayDelta,minuteDelta,'H');
		              	
		        //}

		    },
					
			
			loading: function(bool) {
		    	var xelement = document.getElementById("ajaxloading");
				if (bool) { $('#ajaxloading').show(); xelement.innerHTML="yüklüyor.."; }
				else { $('#ajaxloading').hide(); }
			}
			
		});

		
		
		
	});

</script>
<script type="text/javascript" language="Javascript">
    function AJAX() {
        var ajax = false;
        // Internet Explorer (5.0+)
        try {
            ajax = new ActiveXObject("Msxml2.XMLHTTP");  // yeni versiyon xmlhttp
        } catch (e) {
            try {
                ajax = new ActiveXObject("Microsoft.XMLHTTP");  // eski versiyon xmlhttp
            } catch (e) {
                ajax = false;
            }
        }
        // Mozilla ve Safari
        if (!ajax && typeof XMLHttpRequest != 'undefined') {
            try {
                ajax = new XMLHttpRequest();
            } catch (e) {
                ajax = false;
            }
        }
        // Diger
        if (!ajax && window.createRequest) {
            try {
                ajax = window.createRequest();
            } catch (e) {
                ajax = false;
            }
        }
        return ajax;
    }


    var deneme = 0;
    function removeSpaces(string) {
        return string.split(' ').join('');
    }

    function ajanda_guncelle(xisid, xtip, xgun, xdk, xtumgun) {
        //alert("/Calendar/Update?isid=" + xisid + "&tip=" + xtip + "&gun=" + xgun + "&dk=" + xdk + "&tumGun=" + xtumgun);
        ajax = new AJAX();

        var xelement = document.getElementById("ajaxloading");
        //var hidden_element= document.getElementById("sonucx");
        //element.innerHTML=random_num;

        ajax.open("GET", "/Calendar/Update/?xisid=" + xisid + "&xtip=" + xtip + "&xgun=" + xgun + "&xdk=" + xdk + "&xtumGun=" + xtumgun, true);
        ajax.onreadystatechange = function () {
            if (ajax.readyState < 4) {
                $("#ajaxloading").fadeIn('slow');

                xelement.innerHTML = "Lutfen Bekleyiniz ...";
            }

            if (ajax.readyState == 4 && ajax.status == 200) {



                xelement.innerHTML = ajax.responseText;

                $("#ajaxloading").fadeOut('slow');


            }

        }

        ajax.send(null);

    }

    
</script>
<style type='text/css'>

	#loading {
		position: absolute;
		top: 5px;
		right: 300px;
		z-index:2;
		background-color: yellow;
		}

	
    #calendar {
		width: 816px;
		margin: 30px auto;
		}
        
</style>
}
<div id='ajaxloading' style="position: absolute; top: 5px; right: 130px; z-index:2; background-color: yellow;" ></div>
<div id='calendar' style="font-size:13px;"></div>

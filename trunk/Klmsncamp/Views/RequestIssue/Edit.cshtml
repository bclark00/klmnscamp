@using Telerik.Web.Mvc.UI
@model Klmsncamp.Models.RequestIssue

@{
    ViewBag.Title = "İş İstek Düzenleme";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<div align="center" style="width:640px; margin-left: auto; margin-right: auto; margin-top:30px;">
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
        @Html.HiddenFor(model => model.RequestIssueID)
        <fieldset class="module aligned ">
        <table style="width: 100%; margin-top:15px;">
        <tbody>
        <thead>
        <th colspan="2">İş İstek Düzenleme</th>
        </thead>
        <tr>        
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.WorkshopID)
            </td>
        @if (Model.ValidationStateID == 1 && User.IsInRole("moderators") == false)
        {
            @Html.HiddenFor(model => model.WorkshopID)
            <td style="color: #A80000; vertical-align: middle; text-align: left;">
                @Model.Workshop.Description
            </td>
        }
        else
        {
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("WorkshopID", String.Empty)
                @Html.ValidationMessageFor(model => model.WorkshopID)
            </td>
        }
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.LocationID)
            </td>
        @if (Model.ValidationStateID == 1 && User.IsInRole("moderators") == false)
        {
            @Html.HiddenFor(model => model.LocationID)
            <td style="color: #A80000; vertical-align: middle; text-align: left;">
                @Model.Location.Description
            </td>
        }
        else
        {
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("LocationID", String.Empty)
                @Html.ValidationMessageFor(model => model.LocationID)
            </td>
        }
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.InventoryID, "Inventory")
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("InventoryID", String.Empty)
                @Html.ValidationMessageFor(model => model.InventoryID)
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.RequestTypeID)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("RequestTypeID", String.Empty)<br />
                @Html.ValidationMessageFor(model => model.RequestTypeID)
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.DetailedDescription)
            </td>
        @if (Model.ValidationStateID == 1 && User.IsInRole("moderators") == false)
        {
            @Html.HiddenFor(model => model.DetailedDescription)
            <td style="color: #A80000; vertical-align: middle; text-align: left;">
                @Model.DetailedDescription
            </td>
        }
        else
        {
            <td style="vertical-align: middle; text-align: left;">
                @Html.TextAreaFor(model => model.DetailedDescription, new { cols = "50", rows = "4" })
                @Html.ValidationMessageFor(model => model.DetailedDescription)
            </td>
        }
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.StartDate)
            </td>
        @if (Model.ValidationStateID == 1 && User.IsInRole("moderators") == false)
        {
                @Html.HiddenFor(model => model.StartDate)
                <td style="color: #A80000; vertical-align: middle; text-align: left;">
                    @Model.StartDate
                </td>
        }
        else
        {
             <td style="vertical-align: middle; text-align: left;">
                @Html.Telerik().DateTimePickerFor(model => model.StartDate).Name("StartDate")
                @Html.ValidationMessageFor(model => model.StartDate)
            </td>
        }
        </tr>
         <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.SendEmail)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.EditorFor(model => model.SendEmail)
                @Html.ValidationMessageFor(model => model.SendEmail)
            </td>
        </tr>
@if (User.IsInRole("moderators"))
{
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.RequestStateID)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("RequestStateID", String.Empty)
                @Html.ValidationMessageFor(model => model.RequestStateID) 
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.Note)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.TextAreaFor(model => model.Note, new { cols = "50", rows = "4" })
                @Html.ValidationMessageFor(model => model.Note)
            </td>
        </tr>
       
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.EndDate)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.Telerik().DateTimePickerFor(model => model.EndDate).Name("EndDate")
                @Html.ValidationMessageFor(model => model.EndDate)
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.UserReqID)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("UserReqID", (SelectList)ViewData["UserReqID"], new { style = "width: 120px;" })
                @Html.ValidationMessageFor(model => model.UserReqID)
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.IsAllDay)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.EditorFor(model => model.IsAllDay)
                @Html.ValidationMessageFor(model => model.IsAllDay)
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.IsApproved)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.EditorFor(model => model.IsApproved)
                @Html.ValidationMessageFor(model => model.IsApproved)
            </td>
        </tr>
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.UserID)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("UserID", String.Empty)
                @Html.ValidationMessageFor(model => model.UserID)
            </td>
        </tr>
        
        
        <tr>
            <td style="vertical-align: middle; text-align: right;">
                @Html.LabelFor(model => model.ValidationStateID)
            </td>
            <td style="vertical-align: middle; text-align: left;">
                @Html.DropDownList("ValidationStateID", String.Empty)
                @Html.ValidationMessageFor(model => model.ValidationStateID)
            </td>
        </tr>
        
}
else
{
    @Html.HiddenFor(model => model.RequestStateID)
    @Html.HiddenFor(model => model.Note)
    @Html.HiddenFor(model => model.EndDate)
    @Html.HiddenFor(model => model.UserReqID)
    @Html.HiddenFor(model => model.IsAllDay)
    @Html.HiddenFor(model => model.IsApproved)
    @Html.HiddenFor(model => model.UserID)
    @Html.HiddenFor(model => model.ValidationStateID)
}

    @Html.HiddenFor(model=>model.TimeStamp)      
    @Html.Hidden("show", new { value = ViewBag.show })
    @Html.Hidden("page", new { value = ViewBag.page }) 
      </tbody>
      </table>
    </fieldset>
    <div class="submit-row"> 
        <p class="deletelink-box">  @Html.ActionLink("Vazgeç ve Geri Dön", "Index")&nbsp;|&nbsp;@Html.ActionLink("Sil?", "Delete", new { id = @Model.RequestIssueID })</p>
        <input type="submit" value="Onayla ve Gönder" />
     </div>
    
}
</div>